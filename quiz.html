<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Exam</title>
    <link rel="stylesheet" href="style.css"> <!-- Corrected CSS file name from styles.css to style.css -->
</head>

<body>
    <div class="quiz-container">

        <!-- Header Section with Title and Home Button -->
        <div class="header-controls">
            <div class="title-container">
                <h1 id="quiz-main-title">Loading Exam...</h1>
                <div id="quiz-indicators">
                    <span id="course-indicator"></span> | <span id="week-indicator"></span>
                </div>
            </div>
            <!-- Buttons moved into a container for better flex alignment -->
            <div class="header-buttons-right">
                <button id="theme-toggle-btn" class="theme-toggle">Toggle Theme</button>
                <button id="home-btn" class="nav-btn" title="Back to Course Selection">Home</button>
            </div>
        </div>

        <!-- Week Selection Area -->
        <div id="selection-area" style="display: none;">
            <label for="week-select">Select Week:</label>
            <select id="week-select">
                <option value="">-- Select a Week --</option>
                <!-- Options will be populated by JS based on course -->
            </select>
            <button id="start-btn" class="nav-btn" disabled>Start Exam</button>
        </div>

        <!-- Quiz Area -->
        <div id="quiz-area" style="display: none;">
            <div id="progress">Question 1 of X</div>
            <div id="question-card">
                <p id="question-text">Question text will load here...</p>
                <div id="options-container"></div>
                <p id="feedback" class="feedback"></p>
            </div>
            <div class="navigation-buttons">
                <button id="prev-btn" class="nav-btn" disabled>Previous</button>
                <button id="next-btn" class="nav-btn">Next</button>
            </div>
        </div>

        <!-- Results Area -->
        <div id="results-area" style="display: none;">
            <h2 id="results-title">Exam Complete!</h2>

            <!-- Results buttons moved to top -->
            <div class="results-buttons">
                <button id="restart-btn" class="nav-btn">Restart This Week</button>
                <button id="another-week-btn" class="nav-btn">Choose Another Week</button> <!-- New Button -->
                <button id="change-course-btn" class="nav-btn">Change Course</button>
            </div>

            <div class="score-display">
                <p>Score: <span id="score">0</span>/<span id="total-questions">0</span> (<span
                        id="percentage-score">0</span>%)</p>
            </div>

            <!-- == LEADERBOARD SECTION - START == -->
            <div class="leaderboard-save-section">
                <label for="player-name">Enter Your Name for Leaderboard:</label>
                <input type="text" id="player-name" placeholder="Your Name" maxlength="20">
                <button id="save-score-btn" class="save-button">Save Score</button>
                <p id="save-status" class="save-status"></p> <!-- For feedback -->
            </div>

            <div class="leaderboard-display-section">
                <h3>Leaderboard (Top 10)</h3>
                <ol id="leaderboard-list">
                    <li>Loading...</li>
                </ol>
            </div>
            <!-- == LEADERBOARD SECTION - END == -->

            <!-- Incorrect answers container moved after leaderboard for flow -->
            <div id="incorrect-answers-container">
                <!-- Content generated by script.js -->
            </div>
        </div>

        <!-- Error Area -->
        <div id="error-area"
            style="display: none; padding: 20px; background-color: #fdedec; border: 1px solid #f1a9a0; color: #c0392b; border-radius: 5px; text-align: center;">
            <p id="error-message">An error occurred.</p>
            <button id="back-to-index-btn" class="nav-btn" style="background-color: #e67e22; margin-top: 10px;">Go Back
                to Courses</button>
        </div>

    </div>

    <!-- Scripts at the end: questions FIRST, then scripts -->
    <script src="questions.js"></script>
    <script src="leaderboard_api.js"></script>
    <script src="script.js"></script> <!-- Corrected from scripts.js to script.js -->
</body>

</html>