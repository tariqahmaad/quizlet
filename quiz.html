<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Exam</title>
    <link rel="stylesheet" href="style.css"> <!-- Corrected CSS file name from styles.css to style.css -->
</head>

<body>
    <div class="quiz-container">

        <!-- Header Section with Title and Home Button -->
        <div class="header-controls">
            <h1 id="quiz-main-title">Loading Exam...</h1>
            <!-- Added Home Button -->
            <button id="home-btn" class="nav-btn home-button" title="Back to Course Selection">Home</button>
        </div>

        <!-- Course Info Display -->
        <div id="course-info" style="text-align: center; margin-bottom: 15px; font-style: italic; color: #555;"></div>

        <!-- Week Selection Area -->
        <div id="selection-area" style="display: none;">
            <label for="week-select">Choose a Week:</label>
            <select id="week-select">
                <option value="">-- Select a Week --</option>
                <!-- Options will be populated by JS based on course -->
            </select>
            <button id="start-btn" class="nav-btn" disabled>Start Exam</button>
        </div>

        <!-- Quiz Area -->
        <div id="quiz-area" style="display: none;">
            <div id="quiz-indicators" style="font-size: 0.9em; color: #7f8c8d; margin-bottom: 15px; text-align: left;">
                <span id="course-indicator">Course: ...</span> |
                <span id="week-indicator">Week: ...</span>
            </div>
            <div id="progress">Question 1 of X</div>
            <div id="question-card">
                <!-- Question text changed to p tag to match previous script logic better -->
                <p id="question-text">Question text will load here...</p>
                <div id="options-container"></div>
                <!-- Feedback changed to p tag -->
                <p id="feedback" class="feedback"></p>
            </div>
            <div class="navigation-buttons">
                <button id="prev-btn" class="nav-btn" disabled>Previous</button>
                <button id="next-btn" class="nav-btn">Next</button>
            </div>
        </div>

        <!-- Results Area -->
        <div id="results-area" style="display: none;">
            <h2 id="results-title">Exam Complete!</h2>
            <p id="results-course-week-info" style="color: #555; font-size: 0.9em;"></p>
            <p>Your Score: <span id="score">0</span> / <span id="total-questions">0</span></p>
            <p>Percentage: <span id="percentage-score">0</span>%</p>

            <!-- == LEADERBOARD SECTION - START == -->
            <div class="leaderboard-save-section"
                style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;">
                <label for="player-name">Enter Your Name for Leaderboard:</label>
                <input type="text" id="player-name" placeholder="Your Name" maxlength="20" style="margin: 5px 0;">
                <button id="save-score-btn" class="nav-btn save-button" style="margin-left: 5px;">Save Score</button>
                <p id="save-status" class="save-status" style="font-size: 0.9em; margin-top: 5px; min-height: 1.2em;">
                </p> <!-- For feedback -->
            </div>

            <div class="leaderboard-display-section" style="margin-top: 20px;">
                <h3>Leaderboard (Top 10)</h3>
                <ol id="leaderboard-list" style="list-style-position: inside; text-align: left; padding-left: 0;">
                    <li>Loading...</li>
                </ol>
            </div>
            <!-- == LEADERBOARD SECTION - END == -->


            <!-- Incorrect answers container moved after leaderboard for flow -->
            <div id="incorrect-answers-container"
                style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;">
                <!-- Content generated by script.js -->
            </div>

            <!-- Added "Choose Another Week" button -->
            <div class="results-buttons" style="margin-top: 25px;">
                <button id="restart-btn" class="nav-btn">Restart This Week</button>
                <button id="another-week-btn" class="nav-btn">Choose Another Week</button> <!-- New Button -->
                <button id="change-course-btn" class="nav-btn">Change Course</button>
            </div>
        </div>

        <!-- Error Area -->
        <div id="error-area"
            style="display: none; padding: 20px; background-color: #fdedec; border: 1px solid #f1a9a0; color: #c0392b; border-radius: 5px; text-align: center;">
            <p id="error-message">An error occurred.</p>
            <button id="back-to-index-btn" class="nav-btn" style="background-color: #e67e22; margin-top: 10px;">Go Back
                to Courses</button>
        </div>

    </div>

    <!-- Scripts at the end: questions FIRST, then scripts -->
    <script src="questions.js"></script>
    <script src="leaderboard_api.js"></script>
    <script src="script.js"></script> <!-- Corrected from scripts.js to script.js -->
</body>

</html>