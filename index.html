<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Exam Selector</title>
    <!-- Link to the index CSS -->
    <link rel="stylesheet" href="style_index.css">
    <!-- GoatCounter analytics -->
    <script data-goatcounter="https://tariqo.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</head>

<body>
    <div class="container">
        <h1>Select a Course Exam</h1>
        <p>Choose an available course below and enter your name to start.</p>

        <!-- Daily Visitor Counter -->
        <div class="visitor-counter">
            <p>Daily Visitors: <span id="visitor-count">Loading...</span></p>
        </div>

        <div id="goatcounter-container" class="visitor-counter-display"></div>

        <div class="course-grid">

            <!-- Parallel Programming - Available -->
            <div class="course-item available course-link" data-href="quiz.html?course=COM478"
                title="Start Parallel Programming Exam">
                <h2>PARALLEL PROGRAMMING</h2>
                <p class="course-code">COM478</p>
                <span>Start Exam</span>
            </div>

            <!-- Cyber Security - Available -->
            <div class="course-item available course-link" data-href="quiz.html?course=COM496"
                title="Start Cyber Security Exam">
                <h2>CYBER SECURITY</h2>
                <p class="course-code">COM496</p>
                <span>Start Exam</span>
            </div>


            <!-- Entrepreneurship - Available -->
            <div class="course-item available course-link" data-href="quiz.html?course=GRI403"
                title="Start Entrepreneurship Exam">
                <h2>ENTREPRENEURSHIP</h2>
                <p class="course-code">GRI403</p>
                <span>Start Exam</span>
            </div>

            <!-- Special Topics - Not Available -->
            <div class="course-item unavailable" title="Exam not yet available for Special Topics">
                <h2>SPECIAL TOPICS IN COMPUTER ENGINEERING</h2>
                <p class="course-code">COM476</p>
                <span>Exam Coming Soon</span>
            </div>

            <!-- Natural Language Processing - Not Available -->
            <div class="course-item unavailable" title="Exam not yet available for Natural Language Processing">
                <h2>NATURAL LANGUAGE PROCESSING</h2>
                <p class="course-code">COM494</p>
                <span>Exam Coming Soon</span>
            </div>


        </div>

    </div>

    <!-- Player Name Input Modal -->
    <div id="player-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="modal-close-btn" onclick="closeModal()">Ã—</span>
            <h2>Enter Your Name</h2>
            <p>Please enter your name to start the exam.</p>
            <input type="text" id="modal-player-name" placeholder="Your Name" maxlength="20">
            <p id="modal-error" class="modal-error-message"></p>
            <button id="modal-start-btn">Start Exam</button>
            <!-- Hidden input to store the target URL -->
            <input type="hidden" id="modal-target-url">
        </div>
    </div>

    <script src="leaderboard_api.js"></script>
    <script src="index_script.js"></script>

    <!-- Visitor Counter Script -->
    <script>
        // Option 1: Using the built-in visit_count function
        var t = setInterval(function () {
            if (window.goatcounter && window.goatcounter.visit_count) {
                clearInterval(t);

                // Add visitor counter directly using GoatCounter's built-in function
                window.goatcounter.visit_count({
                    append: '#goatcounter-container',
                    type: 'html',  // 'html', 'svg', or 'png'
                    style: `
                        div { border-color: var(--primary-color); background-color: var(--light-bg); }
                        #gcvc-views { color: var(--primary-color); font-weight: bold; }
                    `
                });

                // Option 2: Also update our custom counter using the JSON API
                // Use goatcounter.get_data()['p'] as recommended in the documentation 
                // for the exact (encoded) path as it appears in the UI
                let path = window.goatcounter.get_data()['p'];
                let r = new XMLHttpRequest();
                r.addEventListener('load', function () {
                    if (this.status === 200) {
                        document.getElementById('visitor-count').textContent = JSON.parse(this.responseText).count;
                    } else {
                        document.getElementById('visitor-count').textContent = 'See counter below';
                    }
                });

                r.open('GET', 'https://tariqo.goatcounter.com/counter/' + encodeURIComponent(path) + '.json');
                r.send();
            }
        }, 100);
    </script>
</body>

</html>